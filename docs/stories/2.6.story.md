# Story 2.6: Wishlist Item Creation (Manual) & Categorization

**Status:** Draft

## Story Statement
As a user,
I want to manually create items on my Wishlist,
so that I can keep track of desired products and enable finding relevant businesses later.

## Acceptance Criteria
- User can add new items to their Wishlist by manually inputting an item name and an optional description.
- The system automatically categorizes newly added Wishlist items based on their name/description into a multi-level structure (Category, Subcategory Level 1, Subcategory Level 2).
- User can view their created Wishlist items.
- When a user clicks a Wishlist item, the system redirects to search page where users see search results of relevant businesses by matching the item's categorization with business product categories.
- WishlistItems table stores user_id, item_name, item_description, category (and inferred subcategories).
- Local Testability: API endpoint POST /api/users/{user_id}/wishlist adds a new wishlist item. Verification by querying SELECT item_name, category FROM public.WishlistItems WHERE user_id = '{user_id}'.

## Dev Notes
### Previous Story Insights
- User favoriting and dashboard personalization are in place. [Source: docs/stories/2.5.story.md]

### Data Models
- WishlistItems table: user_id, item_name, item_description, category, subcategory_1, subcategory_2. [Source: PRD]
- Wishlist form fields: item name, item description. [Source: PRD]

### API Specifications
- POST /api/users/{user_id}/wishlist: Adds a new wishlist item. [Source: PRD]
- GET /api/users/{user_id}/wishlist: Retrieves wishlist items. [Source: PRD]
- All API interactions must go through frontend API service layer (`apps/web/src/api/`). [Source: architecture/coding-standards.md]

### Component Specifications
- Wishlist creation form: Input for item name and optional description. [Source: PRD]
- Wishlist display: List of created items with categories/subcategories. [Source: PRD]
- Clickable wishlist item redirects to search results page. [Source: PRD]

### File Locations
- Frontend pages: `apps/web/src/pages/wishlist.tsx`, `apps/web/src/pages/search-results.tsx`
- API service: `apps/web/src/api/wishlist.ts`
- Backend: `apps/api/src/users/` (serverless functions for wishlist management)
[Source: architecture/unified-project-structure.md]

### Testing Requirements
- Frontend: Unit and integration tests for wishlist creation and display. [Source: architecture/testing-strategy.md]
- Backend: Unit and integration tests for wishlist endpoints. [Source: architecture/testing-strategy.md]
- E2E: Playwright/Cypress tests for wishlist creation, categorization, and search redirect. [Source: architecture/testing-strategy.md]

### Technical Constraints
- TypeScript for all codebases. [Source: architecture/tech-stack.md]
- Follow coding standards for API service layer, error handling, and naming conventions. [Source: architecture/coding-standards.md]
- State management for wishlist via React Context API/Zustand/Jotai. [Source: architecture/tech-stack.md]

## Tasks / Subtasks
1. Implement wishlist creation form for manual item entry. [Source: PRD]
2. Implement backend endpoint for adding wishlist items and auto-categorization. [Source: PRD]
3. Store and retrieve wishlist items in WishlistItems table. [Source: PRD]
4. Display wishlist items with categories/subcategories. [Source: PRD]
5. Implement click-to-search redirect from wishlist item. [Source: PRD]
6. Add validation and error handling for wishlist creation. [Source: architecture/coding-standards.md]
7. Write unit/integration tests for frontend wishlist creation and display. [Source: architecture/testing-strategy.md]
8. Write unit/integration tests for backend wishlist endpoints. [Source: architecture/testing-strategy.md]
9. Write E2E tests for wishlist creation, categorization, and search redirect. [Source: architecture/testing-strategy.md]
10. Verify all file locations and naming conventions match unified project structure. [Source: architecture/unified-project-structure.md]

## Project Structure Notes
- All files should be placed according to the unified project structure. [Source: architecture/unified-project-structure.md]
- No conflicts found between epic requirements and unified project structure.

---

Checklist: To be completed after draft review.
- [ ] All acceptance criteria addressed
- [ ] All technical context referenced
- [ ] Tasks/subtasks are actionable and referenced
- [ ] Project structure alignment verified
- [ ] Ready for developer implementation 