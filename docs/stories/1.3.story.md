# Story 1.3: User Profile Creation & Basic Management

**Status:** Draft

## Story Statement
As a new user,
I want to create and manage my basic profile,
so that my identity is established on the platform.

## Acceptance Criteria
- User profile creation form allows input for full name, preferred name, and a basic avatar selection/upload.
- Supabase Storage integrated for avatar upload/storage.
- User profile data is stored and retrieved from Supabase database.
- Basic user profile viewing page is accessible to the logged-in user.
- Users table in Supabase stores user_id, email, full_name, preferred_name, avatar_url, and created_at.
- Local Testability: Developer can verify the new user profile entry in the Users table by performing a direct SQL query (e.g., SELECT full_name, preferred_name, avatar_url FROM public.Users WHERE user_id = '[newly_created_user_id]').

## Dev Notes
### Previous Story Insights
- User authentication and session management are in place. [Source: docs/stories/1.2.story.md]

### Data Models
- Users table: user_id, email, full_name, preferred_name, avatar_url, created_at. [Source: PRD]
- Profile form fields: full name, preferred name, avatar. [Source: PRD]

### API Specifications
- API endpoints for profile creation, update, and retrieval (e.g., /api/user/profile). [Source: PRD]
- All API interactions must go through frontend API service layer (`apps/web/src/api/`). [Source: architecture/coding-standards.md]

### Component Specifications
- Profile creation form: Input fields for full name, preferred name, avatar upload. [Source: PRD]
- Profile viewing page: Displays user profile info and avatar. [Source: PRD]
- Avatar upload: Integrate with Supabase Storage. [Source: PRD]

### File Locations
- Frontend pages: `apps/web/src/pages/profile.tsx`, `apps/web/src/pages/edit-profile.tsx`
- API service: `apps/web/src/api/user.ts`
- Backend: `apps/api/src/user/` (serverless functions for user profile)
[Source: architecture/unified-project-structure.md]

### Testing Requirements
- Frontend: Unit and integration tests for profile form and viewing page. [Source: architecture/testing-strategy.md]
- Backend: Unit and integration tests for user profile endpoints. [Source: architecture/testing-strategy.md]
- E2E: Playwright/Cypress tests for profile creation and viewing. [Source: architecture/testing-strategy.md]

### Technical Constraints
- Use Supabase Storage for avatar upload. [Source: architecture/tech-stack.md]
- TypeScript for all codebases. [Source: architecture/tech-stack.md]
- Follow coding standards for API service layer, error handling, and naming conventions. [Source: architecture/coding-standards.md]
- State management for user profile via React Context API/Zustand/Jotai. [Source: architecture/tech-stack.md]

## Tasks / Subtasks
1. Create user profile creation form with full name, preferred name, and avatar upload. [Source: PRD]
2. Integrate Supabase Storage for avatar upload. [Source: architecture/tech-stack.md]
3. Implement backend endpoints for profile creation, update, and retrieval. [Source: PRD]
4. Store and retrieve user profile data from Supabase database. [Source: PRD]
5. Create user profile viewing page for logged-in users. [Source: PRD]
6. Add validation and error handling for profile form. [Source: architecture/coding-standards.md]
7. Write unit/integration tests for frontend profile form and viewing page. [Source: architecture/testing-strategy.md]
8. Write unit/integration tests for backend user profile endpoints. [Source: architecture/testing-strategy.md]
9. Write E2E tests for profile creation and viewing. [Source: architecture/testing-strategy.md]
10. Verify all file locations and naming conventions match unified project structure. [Source: architecture/unified-project-structure.md]

## Project Structure Notes
- All files should be placed according to the unified project structure. [Source: architecture/unified-project-structure.md]
- No conflicts found between epic requirements and unified project structure.

---

Checklist: To be completed after draft review.
- [ ] All acceptance criteria addressed
- [ ] All technical context referenced
- [ ] Tasks/subtasks are actionable and referenced
- [ ] Project structure alignment verified
- [ ] Ready for developer implementation 