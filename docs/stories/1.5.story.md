# Story 1.5: Business Profile Creation & Basic Management

**Status:** Done

## Story Statement
As a new business owner,
I want to create and manage my basic business profile,
so that my business presence is established on the platform.

## Acceptance Criteria
- Business profile creation form allows input for business name, address, Google location URL, contact info, open/close times, holidays and logo upload.
- Supabase Storage integrated for logo upload/storage.
- Business profile data is stored and retrieved from Supabase database.
- Basic business profile viewing page is accessible to the logged-in business owner.
- Businesses table in Supabase stores business_id, email, business_name, address, google_location_url, contact_info, logo_url, and created_at.
- Local Testability: Developer can verify the new business entry in the Businesses table by performing a direct SQL query (e.g., SELECT business_name, address FROM public.Businesses WHERE business_id = '[newly_created_business_id]').

## Dev Notes
### Previous Story Insights
- Business authentication and session management are in place. [Source: docs/stories/1.4.story.md]

### Data Models
- Businesses table: business_id, email, business_name, address, google_location_url, contact_info, logo_url, created_at. [Source: PRD]
- Profile form fields: business name, address, Google location URL, contact info, open/close times, holidays, logo. [Source: PRD]

### API Specifications
- API endpoints for business profile creation, update, and retrieval (e.g., /api/business/profile). [Source: PRD]
- All API interactions must go through frontend API service layer (`apps/web/src/api/`). [Source: architecture/coding-standards.md]

### Component Specifications
- Business profile creation form: Input fields for all required business info and logo upload. [Source: PRD]
- Business profile viewing page: Displays business profile info and logo. [Source: PRD]
- Logo upload: Integrate with Supabase Storage. [Source: PRD]

### File Locations
- Frontend pages: `apps/web/src/pages/business-profile.tsx`, `apps/web/src/pages/edit-business-profile.tsx`
- API service: `apps/web/src/api/business.ts`
- Backend: `apps/api/src/business/` (serverless functions for business profile)
[Source: architecture/unified-project-structure.md]

### Testing Requirements
- Frontend: Unit and integration tests for business profile form and viewing page. [Source: architecture/testing-strategy.md]
- Backend: Unit and integration tests for business profile endpoints. [Source: architecture/testing-strategy.md]
- E2E: Playwright/Cypress tests for business profile creation and viewing. [Source: architecture/testing-strategy.md]

### Technical Constraints
- Use Supabase Storage for logo upload. [Source: architecture/tech-stack.md]
- TypeScript for all codebases. [Source: architecture/tech-stack.md]
- Follow coding standards for API service layer, error handling, and naming conventions. [Source: architecture/coding-standards.md]
- State management for business profile via React Context API/Zustand/Jotai. [Source: architecture/tech-stack.md]

## Tasks / Subtasks
1. Create business profile creation form with all required fields and logo upload. [Source: PRD]
2. Integrate Supabase Storage for logo upload. [Source: architecture/tech-stack.md]
3. Implement backend endpoints for business profile creation, update, and retrieval. [Source: PRD]
4. Store and retrieve business profile data from Supabase database. [Source: PRD]
5. Create business profile viewing page for logged-in business owners. [Source: PRD]
6. Add validation and error handling for business profile form. [Source: architecture/coding-standards.md]
7. Write unit/integration tests for frontend business profile form and viewing page. [Source: architecture/testing-strategy.md]
8. Write unit/integration tests for backend business profile endpoints. [Source: architecture/testing-strategy.md]
9. Write E2E tests for business profile creation and viewing. [Source: architecture/testing-strategy.md]
10. Verify all file locations and naming conventions match unified project structure. [Source: architecture/unified-project-structure.md]

## Project Structure Notes
- All files should be placed according to the unified project structure. [Source: architecture/unified-project-structure.md]
- No conflicts found between epic requirements and unified project structure.

---

Checklist: To be completed after draft review.
- [ ] All acceptance criteria addressed
- [ ] All technical context referenced
- [ ] Tasks/subtasks are actionable and referenced
- [ ] Project structure alignment verified
- [ ] Ready for developer implementation 

## Dev Agent Record
### Agent Model Used
- Gemini 2.5 Flash

### Debug Log References
- Frontend form creation and validation: apps/web/src/pages/edit-business-profile.tsx
- Backend endpoint implementation: apps/api/src/business/profile.ts
- Frontend viewing page: apps/web/src/pages/business-profile.tsx
- AuthContext updates: apps/web/src/context/AuthContext.tsx
- Frontend form tests: apps/web/src/pages/edit-business-profile.test.tsx
- Backend endpoint tests: apps/api/src/business/tests/profile.test.ts
- E2E tests: e2e/business-profile.spec.ts
- Frontend API service: apps/web/src/api/business.ts

### Completion Notes List
- All tasks successfully implemented and verified.
- Frontend business profile creation form with all required fields and logo upload is implemented in `apps/web/src/pages/edit-business-profile.tsx`.
- Supabase Storage integration for logo upload is handled within `edit-business-profile.tsx` and the backend `profile.ts`.
- Backend endpoints for business profile creation, update, and retrieval are implemented in `apps/api/src/business/profile.ts`.
- Business profile data is stored and retrieved from Supabase database via the implemented backend endpoints.
- Basic business profile viewing page is implemented in `apps/web/src/pages/business-profile.tsx`.
- Validation and error handling for the business profile form have been added to `apps/web/src/pages/edit-business-profile.tsx`.
- Unit/integration tests for the frontend business profile form are in `apps/web/src/pages/edit-business-profile.test.tsx`.
- Unit/integration tests for the backend business profile endpoints are in `apps/api/src/business/tests/profile.test.ts`.
- E2E tests for business profile creation and viewing are in `e2e/business-profile.spec.ts`.
- All file locations and naming conventions match the unified project structure as specified in the story and architecture documentation.

### File List
- `apps/web/src/pages/edit-business-profile.tsx` (modified)
- `apps/api/src/business/profile.ts` (new)
- `apps/web/src/pages/business-profile.tsx` (new)
- `apps/web/src/context/AuthContext.tsx` (modified)
- `apps/web/src/pages/edit-business-profile.test.tsx` (new)
- `apps/api/src/business/tests/profile.test.ts` (new)
- `e2e/business-profile.spec.ts` (new)
- `apps/web/src/api/business.ts` (modified)

### Change Log
- Implemented business profile creation form.
- Integrated Supabase Storage for logo upload.
- Implemented backend API for profile management.
- Created business profile viewing page.
- Added frontend form validations.
- Updated AuthContext to support business profiles.
- Added comprehensive unit, integration, and E2E tests.
- Verified project structure and naming conventions. 