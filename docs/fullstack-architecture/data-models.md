# Data Models
User
Purpose: Stores all user-related information, including authentication details, profile, preferences, and driver status.

Key Attributes: user_id (PK), email (Unique), phone_number (Unique, optional), password_hash, full_name, preferred_name, avatar_url, city, interests (array), is_online, is_driver, driver_score, privacy_settings (JSONB).

Relationships: One-to-many with UserActivities, BusinessReviews, BusinessFollows, UserCoupons, WishlistItems, Events, Notifications. Many-to-many with Friends.

Business
Purpose: Stores all business-related information, including authentication, profile, storefront details, and operational hours.

Key Attributes: business_id (PK), email (Unique), password_hash, business_name, address, google_location_url, contact_info, logo_url, is_open, category, subcategory, target_areas (array), target_demographics (array), avg_ticket_size, high_season_start/end, low_season_start/end, open_close_times (JSONB), holidays (JSONB), is_verified.

Relationships: One-to-many with Storefronts, BusinessReviews, BusinessFollows, Coupons, Ads, Promotions, Notifications, RevenueTracking.

Storefront
Purpose: Represents a business's digital presence within the SynC app, including branding and product display.

Key Attributes: storefront_id (PK), business_id (FK, Unique), branding_info, description, theme, current_offers (JSONB), contact_details (JSONB).

Relationships: One-to-many with StorefrontProducts.

StorefrontProduct
Purpose: Details products displayed on a business's digital storefront.

Key Attributes: storefront_product_id (PK), storefront_id (FK), product_name, product_description, product_image_url, display_order, is_trending.

Coupon
Purpose: Defines the master details of a coupon offer created by a business.

Key Attributes: coupon_id (PK), business_id (FK), original_offer_id (FK), title, description, terms_and_conditions, value, start_date, end_date, total_quantity, remaining_quantity, is_active, is_public, cost_per_coupon.

Relationships: One-to-many with UserCoupons.

UserCoupon
Purpose: Represents a specific instance of a coupon collected or owned by a user, tracking its lifecycle.

Key Attributes: user_coupon_id (PK), coupon_id (FK), user_id (FK), unique_code (Unique), current_owner_id (FK to Users), is_redeemed, redeemed_at, is_expired, collected_at, is_favorite, transfer_count, original_acquisition_method, lifecycle_metadata (JSONB).

Relationships: One-to-one with CouponShares (as shared_coupon_instance_id).

CouponShare
Purpose: Tracks instances of users sharing coupons with friends, linking the original and new coupon instances.

Key Attributes: share_id (PK), original_user_coupon_id (FK to UserCoupons), sharer_user_id (FK to Users), receiver_user_id (FK to Users), shared_coupon_instance_id (FK to UserCoupons), shared_at, is_accepted, accepted_at.

WishlistItem
Purpose: Stores items added to a user's wishlist, categorized for matching with offers.

Key Attributes: wishlist_item_id (PK), user_id (FK), item_name, item_description, category (and inferred subcategories), is_matched_with_offer.

Relationships: One-to-many with WishlistMatches.

WishlistMatch
Purpose: Tracks when a wishlist item is matched with an offer or coupon.

Key Attributes: match_id (PK), wishlist_item_id (FK), coupon_id (FK, optional), offer_id (FK, optional), business_id (FK), matched_at, notification_sent_at.

Ad
Purpose: Defines promotional advertisements displayed to users.

Key Attributes: ad_id (PK), business_id (FK), ad_type, title, image_url, target_parameters (JSONB), start_date, end_date, cost_per_day, total_cost, is_active.

Promotion
Purpose: Defines broader promotional campaigns from businesses.

Key Attributes: promotion_id (PK), business_id (FK), title, description, target_parameters (JSONB), start_date, end_date.

Notification
Purpose: Stores all notifications sent to users.

Key Attributes: notification_id (PK), recipient_user_id (FK), sender_business_id (FK, optional), notification_type, message, deep_link_url, is_read, sent_at, throttling_group_id.

PlatformConfig
Purpose: Stores global platform configurations, such as pricing rates.

Key Attributes: config_id (PK), key_name (Unique), config_value (JSONB), description, updated_by (FK to Platform Owner/Admin), updated_at.

RevenueTracking
Purpose: Records all revenue generated by the platform.

Key Attributes: revenue_id (PK), source_type, associated_entity_id, business_id (FK), amount, transaction_date.

PlatformOwnerActivity
Purpose: Logs actions performed by the platform owner/admin.

Key Attributes: activity_id (PK), platform_owner_id (Internal ID), activity_type, target_entity_id, activity_details (JSONB), occurred_at.

UserActivity
Purpose: Logs various user actions for analytics, including check-ins, coupon redemptions, social actions, ad interactions.

Key Attributes: activity_id (PK), user_id (FK), activity_type, entity_id (FK to relevant entity), activity_data (JSONB), occurred_at.

Friend
Purpose: Tracks friendship relationships between users.

Key Attributes: friendship_id (PK), user_id (FK), friend_id (FK), status ('pending', 'accepted', 'blocked'), initiated_at, accepted_at.
